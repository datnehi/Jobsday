<nav class="navbar">
  <div class="navbar-logo">
    <a routerLink="/">
      <img src="assets/baner.png" alt="Logo">
    </a>
  </div>

  <ul class="navbar-menu">
    <li class="navbar-item dropdown">
      <a routerLink="/dashboard">Việc làm <i class="bi bi-chevron-down"></i></a>
      <ul class="dropdown-menu">
        <li><a routerLink="/dashboard">Tìm việc làm</a></li>
        <li><a routerLink="/saved-jobs">Việc làm đã lưu</a></li>
        <li><a routerLink="/applied-history">Việc làm đã ứng tuyển</a></li>
      </ul>
    </li>
    <li class="navbar-item dropdown">
      <a routerLink="/quan-ly-cv">Quản lý CV <i class="bi bi-chevron-down"></i></a>
      <ul class="dropdown-menu">
        <li><a routerLink="/quan-ly-cv">CV của tôi</a></li>
        <li><a routerLink="/upload-cv">Tải CV lên</a></li>
        <li><a routerLink="/xem-ho-so">Nhà tuyển dụng xem hồ sơ</a></li>
      </ul>
    </li>
  </ul>

  <ul class="navbar-right">
    <ng-container *ngIf="isLogging; else loggedOut">
        <li class="icon-item">
          <button class="icon-content">
            <div class="icon-container">
              <i class="bi bi-bell"></i>
            </div>
          </button>
        </li>
        <li class="icon-item">
          <a class="icon-content" routerLink="/messages">
            <div class="icon-container">
              <i class="bi bi-chat-dots"></i>
            </div>
          </a>
        </li>
        <li class="icon-item dropdown">
          <a routerLink="/profile" class="user-link">
            <img [src]="user?.avatarUrl || 'assets/user.jpg'" alt="Avatar" class="avatar">
            <div class="small-icon">
              <i class="bi bi-chevron-down"></i>
            </div>
          </a>
          <ul class="dropdown-menu p-0" style="min-width: 260px;">
            <!-- Thông tin cá nhân -->
            <li class="px-3 py-3 border-bottom">
              <div class="d-flex align-items-center gap-3">
                <img [src]="user?.avatarUrl || 'assets/user.jpg'" alt="Avatar" width="48" height="48" class="rounded-circle border" />
                <div>
                  <div class="fw-bold">{{ user?.fullName }}</div>
                  <div class="text-muted small">
                    ID {{ user?.id }} | {{ user?.email }}
                  </div>
                </div>
              </div>
            </li>
            <li class="py-1"></li>
            <!-- Các menu chức năng -->
            <li><a routerLink="/personal-info" class="fw-bold">Thông tin cá nhân</a></li>
            <li><a routerLink="/change-password" class="fw-bold">Đổi mật khẩu</a></li>
            <li class="px-3 py-3">
              <button (click)="logout()" class="btn btn-light w-100 py-2 fw-bold d-flex align-items-center justify-content-center gap-2 rounded-pill">
                <i class="bi bi-box-arrow-right"></i> Đăng xuất
              </button>
            </li>
          </ul>
        </li>
      </ng-container>

    <ng-template #loggedOut>
      <li>
        <a class="btn btn-outline" routerLink="/register">Đăng ký</a>
      </li>
      <li>
        <a class="btn btn-primary" routerLink="/login">Đăng nhập</a>
      </li>
    </ng-template>
  </ul>
</nav>
