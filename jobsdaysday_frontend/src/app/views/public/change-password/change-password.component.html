<div class="container py-4" style="max-width:1200px;">
  <div class="row">
    <!-- Cột trái: Form đổi mật khẩu -->
    <div class="col-lg-8 mb-4">
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h4 class="fw-bold mb-4">Thay đổi mật khẩu đăng nhập</h4>
          <form (ngSubmit)="onSubmit()" [formGroup]="infoForm">
            <div class="mb-3 row align-items-center">
              <label class="col-sm-3 col-form-label fw-bold text-nowrap">Email đăng nhập</label>
              <div class="col-sm-9">
                <input type="email" class="form-control" [value]="user?.email || 'dndat1122@gmail.com'" disabled>
              </div>
            </div>
            <div class="mb-3 row align-items-center">
              <label class="col-sm-3 col-form-label fw-bold text-nowrap">Mật khẩu hiện tại</label>
              <div class="col-sm-9">
                <input type="password" class="form-control" formControlName="currentPassword" required>
                <div *ngIf="infoForm.get('currentPassword')?.invalid && (infoForm.get('currentPassword')?.dirty || infoForm.get('currentPassword')?.touched)" class="text-danger">
                  Mật khẩu hiện tại không được để trống
                </div>
              </div>
            </div>
            <div class="mb-3 row align-items-center">
              <label class="col-sm-3 col-form-label fw-bold text-nowrap">Mật khẩu mới</label>
              <div class="col-sm-9">
                <input type="password" class="form-control" formControlName="newPassword" required>
                <div *ngIf="infoForm.get('newPassword')?.invalid && (infoForm.get('newPassword')?.dirty || infoForm.get('newPassword')?.touched)" class="text-danger">
                  Mật khẩu mới phải có ít nhất 6 ký tự, bao gồm chữ hoa, chữ thường và ký tự đặc biệt
                </div>
              </div>
            </div>
            <div class="mb-3 row align-items-center">
              <label class="col-sm-3 col-form-label fw-bold text-nowrap">Nhập lại mật khẩu mới</label>
              <div class="col-sm-9">
                <input type="password" class="form-control" formControlName="confirmPassword" required>
                <div *ngIf="infoForm.get('confirmPassword')?.invalid && (infoForm.get('confirmPassword')?.dirty || infoForm.get('confirmPassword')?.touched)" class="text-danger">
                  Vui lòng nhập lại mật khẩu mới
                </div>
                <div *ngIf="infoForm.errors?.['passwordMismatch'] && infoForm.get('confirmPassword')?.touched" class="text-danger">
                  Mật khẩu nhập lại không khớp!
                </div>
              </div>
            </div>
            <div class="mb-3 row">
              <div class="col-sm-9 offset-sm-3">
                <button type="submit" class="btn btn-primary px-4 fw-bold">Lưu</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Cột phải: Thông tin tài khoản và trạng thái (tái sử dụng từ trang cá nhân) -->
    <div class="col-lg-4 mb-4">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <div class="mb-3 d-flex align-items-center gap-3">
            <img [src]="user?.avatarUrl || 'assets/user.jpg'" alt=" Avatar" width="48" height="48"
              class="rounded-circle border" />
            <h4 class="fw-bold text-primary mb-1 mb-0">Chào bạn trở lại, <b>{{ user?.fullName }}</b></h4>
          </div>
          <div *ngIf="user?.role == 'CANDIDATE'">
            <div class="form-check form-switch d-flex align-items-center mb-2">
              <input class="form-check-input me-2" type="checkbox" style="cursor: pointer;" [(ngModel)]="allowNTDSearch"
                id="ntdSearch" (change)="toggleSearchChange()" />
              <label class="form-check-label fw-bold text-primary" for="ntdSearch">
                Cho phép NTD tìm kiếm hồ sơ
              </label>
            </div>
            <ul class="mt-2 text-muted ps-3">
              <li>Nhắn tin qua Jobsday</li>
              <li>Email và Số điện thoại của bạn</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
